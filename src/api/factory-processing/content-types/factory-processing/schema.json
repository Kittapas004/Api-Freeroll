{
  "kind": "collectionType",
  "collectionName": "factory_processings",
  "info": {
    "singularName": "factory-processing",
    "pluralName": "factory-processings",
    "displayName": "Factory_Processing",
    "description": ""
  },
  "options": {
    "draftAndPublish": true
  },
  "attributes": {
    "Batch_Id": {
      "type": "string"
    },
    "factory": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "api::factory.factory",
      "inversedBy": "factory_processings"
    },
    "Date_Received": {
      "type": "datetime"
    },
    "Processing_Status": {
      "type": "enumeration",
      "enum": [
        "Received",
        "Processing",
        "Completed",
        "Export Success"
      ]
    },
    "Attachments": {
      "type": "media",
      "multiple": true,
      "required": false,
      "allowedTypes": [
        "images",
        "files",
        "videos",
        "audios"
      ]
    },
    "factory_submission": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "api::factory-submission.factory-submission",
      "inversedBy": "factory_processings"
    },
    "processing_operations": {
      "type": "text",
      "description": "JSON string ของขั้นตอนการแปรรูป (สำหรับ UI)"
    },
    "output_records_json": {
      "type": "text",
      "description": "JSON string ของการบันทึกผลผลิตหลายครั้ง (สำหรับ UI เก็บ multiple outputs ใน 1 session)"
    },
    "raw_material_type": {
      "type": "enumeration",
      "enum": [
        "Fresh Rhizome",
        "Dried Slice",
        "Powder"
      ]
    },
    "raw_material_source": {
      "type": "string"
    },
    "batch_lot_number": {
      "type": "string"
    },
    "incoming_weight": {
      "type": "decimal"
    },
    "moisture": {
      "type": "decimal"
    },
    "curcuminoid_content": {
      "type": "decimal"
    },
    "lead_ppm": {
      "type": "decimal"
    },
    "cadmium_ppm": {
      "type": "decimal"
    },
    "arsenic_ppm": {
      "type": "decimal"
    },
    "mercury_ppm": {
      "type": "decimal"
    },
    "total_plate_count": {
      "type": "decimal"
    },
    "yeast_mold": {
      "type": "decimal"
    },
    "e_coli": {
      "type": "enumeration",
      "enum": [
        "Not Detected",
        "Detected"
      ]
    },
    "salmonella": {
      "type": "enumeration",
      "enum": [
        "Not Detected",
        "Detected"
      ]
    },
    "inspection_notes": {
      "type": "text"
    },
    "pesticide_residues": {
      "type": "text"
    },
    "quality_inspection_completed": {
      "type": "boolean",
      "default": false,
      "description": "สถานะการตรวจสอบคุณภาพ Step 1"
    },
    "quality_inspector": {
      "type": "string",
      "description": "ผู้ตรวจสอบคุณภาพ"
    },
    "quality_inspection_date": {
      "type": "datetime",
      "description": "วันที่ตรวจสอบคุณภาพ"
    },
    "workflow_step": {
      "type": "integer",
      "default": 0,
      "description": "ขั้นตอนปัจจุบันในกระบวนการแปรรูป (0=overview, 1-4=steps)"
    },
    "is_processing_mode": {
      "type": "boolean",
      "default": false,
      "description": "สถานะการทำงานในโหมดแปรรูป"
    },
    "inspector_name": {
      "type": "string",
      "description": "ชื่อผู้ตรวจสอบคุณภาพ"
    },
    "processed_weight": {
      "type": "decimal",
      "description": "น้ำหนักที่แปรรูปไปแล้ว"
    },
    "final_product_type": {
      "type": "enumeration",
      "enum": [
        "Powder",
        "Extract",
        "Capsule",
        "Tea Bag",
        "Dried Slice",
        "Fresh Rhizome"
      ],
      "description": "ประเภทผลิตภัณฑ์สุดท้าย"
    },
    "output_quantity": {
      "type": "decimal",
      "description": "ปริมาณผลผลิต"
    },
    "output_unit": {
      "type": "enumeration",
      "enum": [
        "kg",
        "packs",
        "boxes",
        "grams",
        "pieces"
      ],
      "default": "kg",
      "description": "หน่วยของผลผลิต"
    },
    "waste_quantity": {
      "type": "decimal",
      "description": "ปริมาณของเสีย"
    },
    "remaining_stock": {
      "type": "decimal",
      "description": "คงเหลือในสต็อก"
    },
    "standard_criteria": {
      "type": "enumeration",
      "enum": [
        "GAP",
        "THP",
        "GMP",
        "Organic",
        "HACCP",
        "ISO"
      ],
      "description": "มาตรฐานการรับรอง"
    },
    "certification_status": {
      "type": "enumeration",
      "enum": [
        "Pass",
        "Fail",
        "Pending",
        "Under_Review"
      ],
      "default": "Pending",
      "description": "สถานะการรับรองคุณภาพ"
    },
    "compliance_notes": {
      "type": "text",
      "description": "หมายเหตุการรับรองคุณภาพ"
    },
    "product_grade": {
      "type": "enumeration",
      "enum": [
        "Herbal Grade (5%)",
        "Herbal Grade (6%)",
        "Herbal Grade (7%)",
        "Herbal Grade (8%)",
        "Herbal Grade (9%)",
        "Premium > 9%"
      ],
      "description": "เกรดผลิตภัณฑ์"
    },
    "target_market": {
      "type": "enumeration",
      "enum": [
        "Food",
        "Supplement",
        "Cosmetic",
        "Export",
        "Pharmaceutical",
        "Industrial"
      ],
      "description": "ตลาดเป้าหมาย"
    },
    "user_documentId": {
      "type": "string"
    },
    "export_factory_history": {
      "type": "relation",
      "relation": "oneToOne",
      "target": "api::export-factory-history.export-factory-history",
      "mappedBy": "factory_processing"
    },
    "factory_notifications": {
      "type": "relation",
      "relation": "oneToMany",
      "target": "api::factory-notification.factory-notification",
      "mappedBy": "factory_processing"
    },
    "processing_weight_history": {
      "type": "text"
    }
  }
}
